# 빈 생명주기

스프링 빈의 라이프사이클

```java
객체 생성 -> 의존관계 주입
```

스프링 빈은 객체를 생성하고, 의존관계 주입이 다 끝난 다음에야 필요한 데이터를 사용할 수 있는 준비가 완료된다. 따라서 초기화 작업은 의존관계 주입이 모두 완료되고 난 다음에 호출해야 한다.

스프링은 의존관계 주입이 완료되면 스프링 빈에게 콜백 메서드를 통해서 초기화 시점을 알려주는 다양한 기능을 제공한다. 또한 스프링은 스프링 컨테이너가 종료되기 직전에 소멸 콜백을 준다.

스프링 빈의 이벤트 라이프사이클

```java
스프링 컨테이너 생성 → 스프링 빈 생성 → 의존관계 주입 초기화 콜백 → 사용 → 소멸전 콜백 → 스프링 종료
```

- **초기화 콜백:** 빈이 생성되고, 빈의 의존관계 주입이 완료된 후 호출
- **소멸전 콜백:** 빈이 소멸되기 직전에 호출

### @PostConstruct

- 초기화 콜백

```java
@PostConstruct
public void init() {
    call("초기화 메시지");
}
```

- 의존성 주입이 완료된 후에 실행되어야 하는 메서드에 사용
- 해당 애노테이션은 다른 리소스에서 호출되지 않아도 수행
- 생성자 보다 늦게 호출된다.

> 호출순서
>
> 1. 생성자 호출
> 2. 의존성 주입 완료
> 3. @PostConstruct

### @PreDestroy

- 소멸전 콜백

```java
@PreDestroy
public void close() {
    call("close");
}
```

- 스프링 컨테이너가 종료되기 직전에 실행된다.
- 소멸전 콜백이 실행되면 스프링 컨테이너는 종료된다.

## References

- [스프링 핵심 원리 - 기본편](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8#)
- https://velog.io/@limsubin/Spring-Boot%EC%97%90%EC%84%9C-PostConstruct-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90
