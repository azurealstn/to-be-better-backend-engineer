# [Book] 혼자 공부하는 컴퓨터 구조와 운영체제

[혼자 공부하는 컴퓨터 구조와 운영체제](https://www.yes24.com/Product/Goods/111378840) 책은 컴퓨터 구조와 운영체제에 대해 처음 공부하는 사람이 봐도 괜찮고, 그만큼 쉽게 풀어썼다. (그래서 추천한다.)

## 목자

- [컴퓨터 구조](#컴퓨터-구조)
- [데이터](#데이터)

## 컴퓨터 구조

### 컴퓨터가 이해하는 정보

컴퓨터는 0과 1로 표현된 정보만을 이해한다. 0과 1로 표현되는 정보에는 크게 두 종류가 있는데 데이터와 명령어이다.

- 데이터: 컴퓨터가 이해하는 숫자, 문자, 이미지, 동영상과 같은 정적인 정보를 가리킨다.
- 명령어: 데이터는 명령어 없이 아무것도 할 수 없는 정보 덩어리이고, 명령어는 데이터를 움직이고 컴퓨터를 작동시키는 정보이다.

### 컴퓨터의 4가지 핵심 부품

- 중앙처리장치(CPU: Central Processing Unit) - CPU
- 주기억장치(Main Memory) - 메모리
  - RAM(Random Access Memory) <-- 중요
  - ROM(Read Only Memory)
- 보조기억장치(Secondary Storage)
- 입출력장치(Input/Output Device, I/O)

#### 메모리

메모리는 현재 실행되는 프로그램의 명령어와 데이터를 저장하는 부품이다. 즉, 프로그램이 실행되려면 반드시 메모리에 저장되어 있어야 한다. 메모리에는 저장된 값에 빠르고 효율적으로 접근하기 위해 주소라는 개념이 사용되는데 현실에서 주소로 원하는 위치를 찾아갈 수 있듯이 컴퓨터에서도 주소로 메모리 내 원하는 위치에 접근할 수 있다.

#### CPU

CPU는 컴퓨터 두뇌이다. CPU는 메모리에 저장된 명령어를 읽어들이고, 읽어들인 명령어를 해석하고, 실행하는 부품이다. CPU 내부 구성 요소 중 중요한 3가지는 아래와 같다.

- 산술논리연산장치(ALU: Arithmetic Logic Unit): 쉽게 말해 계산기이다. 오직 계산만을 위해 존재하는 부품으로 ALU라고 부른다.
- 레지스터(Register): CPU 내부의 작은 임시 저장 장치이다. 프로그램을 실행하는데 필요값들을 임시로 저장한다.
- 제어장치(CU: Control Unit): 제어 신호라는 전기 신호를 내보내고 명령어를 해석하는 장치이다. 제어 신호란 컴퓨터 부품들을 관리하고 작동시키기 위한 일종의 전기 신호이다.

### 보조기억장치

앞서 메모리에는 치명적인 단점이 있는데 가격이 비싸 저장 용량이 적다는 점과 전원이 꺼지면 저장된 내용을 읽는다는 점이다. 따라서 메모리보다 용량도 크고 전원이 꺼져도 내용을 잃지 않는 메모리를 보조할 저장 장치가 보조기억장치이다.

- 하드디스크
- SSD
- USB 메모리
- DVD
- CD-ROM

### 입출력장치

입출력장치는 마이크, 스피커, 프린터, 마우스, 키보드처럼 컴퓨터 외부에 연결되어 컴퓨터 내부와 정보를 교환하는 장치를 의미한다.

### 버스

위에서 설명한 4가지 핵심 부품들은 모두 메인보드라는 판에 연결되고, 연결된 부품들은 서로 정보를 주고 받을 수 있는데, 메인보드 내부에 버스라는 통로가 있기에 가능했다. 버스 중에서도 시스템 버스가 가장 중요하다.

#### 시스템버스

- 주소 버스: 주소를 주고받는 통로
- 데이터 버스: 명령어와 데이터를 주고받는 통로
- 제어 버스: 제어 신호를 주고받는 통로

## 데이터

- 비트(bit): 0과 1을 나타내는 가장 작은 정보 단위
- 바이트(byte): 여덟 개의 비트를 묶은 단위
  - 1byte = 8bit
  - 2^8 = 256개
- 킬로바이트(kB): 1바이트 천개를 묶은 단위
  - 1kB: 1000byte
- 메가바이트(MB): 1킬로바이트 천개를 묶은 단위
  - 1MB: 1000kB
- 기가바이트(GB): 1메가바이트 천개를 묶은 단위
  - 1GB: 1000MB
- 테라바이트(TB): 1기가바이트 천개를 묶은 단위
  - 1TB: 1000GB

> 1kB는 1024byte, 1MB는 1024kB.. 이런식으로 표현하는 것은 잘못된 관습이다. 1024개 묶어 표현한 단위는 KiB, MiB .. 이렇게 표현한다.
> 중요한 정보 단위 중 워드라는 단위도 있다. 워드(word)란 CPU가 한 번에 처리할 수 있는 데이터 크기를 말한다. 현대 컴퓨터의 워드 크기는 대부분 32비트 또는 64비트이다. 가령 인텔의 x86 CPU는 32비트 워드, x64 CPU는 64비트 워드이다.

### 0과 1로 문자를 표현하는 방법

- **문자 집합**: 컴퓨터가 인식하고 표현할 수 있는 문자의 모음
  - 예를 들어, 문자 집합이 {a, b, c} 이면 컴퓨터는 이 세 개의 문자는 이해할 수 있고, d나 f.. 같은 문자는 이해할 수 없다.
- **문자 인코딩**: 문자를 0과 1로 변환해야 비로소 컴퓨터가 이해할 수 있는데, 이 변환 과정을 문자 인코딩이라 한다.
- **문자 디코딩**: 반대로 사람이 이해할 수 있는 문자로 변환하는 과정을 문자 디코딩이라 한다.

#### 아스키코드

아스키(ASCII)는 초창기 문자 집합 중 하나로, 영어 알파벳과 아라비아 숫자, 그리고 일부 특수 문자를 포함한다. 아스키 문자 집합에 속한 문자들은 각각 7비트로 표현되는데, 2^7으로 총 128개의 문자를 표현할 수 있다. (0~127) 아스키 문자의 단점은 한글을 표현할 수 없다.

> 아스키 문자 표현은 실제로 8비트 이지만, 1비트는 패리티 비트라는 오류 검출을 위해 사용되기 때문에 아스키 문자는 7비트로 표현할 수 있다.

#### EUC-KR

EUC-KR은 KS X 1001, KS X 1003이라는 문자 집합을 기반으로 하는 대표적인 완성형 인코딩 방식이다. EUC-KR 인코딩은 초성, 중성, 종성이 모두 결합된 한글 단어에 2바이트 크기의 코드를 부여한다. 즉, 한글자를 표현하는데 16비트가 필요하다. (16비트는 16진수로 표현할 수 있다.) 다만 쀍, 쀓 같은 글자는 표현할 수 없다..

#### 유니코드와 UTF-8

유니코드는 EUC-KR보다 훨씬 다양한 한글을 포함하며 대부분 나라의 문자, 특수문자, 화살표나 이모티콘까지도 코드로 표현할 수 있는 통일된 문자 집합이다.

유니코드의 인코딩 방식에는 크게 UTF-8, UTF-16, UTF-32 가 있다. 현대는 가장 대중적인 UTF-8 인코딩 방식을 사용한다.

## 명령어

프로그래밍 언어로 만든 소스코드는 컴퓨터 내부에서 명령어로 변환된다.

- 고급 언어: 사람이 이해하는 언어
  - Java
  - Python
  - ..
- 저급 언어: 컴퓨터가 이해하는 언어
  - 기계어
  - 어셈블리어

고급 언어로 작성된 소스코드가 실행되려면 반드시 저급 언어인 명령어로 변환되어야 한다.

### 컴파일 언어, 인터프리터 언어

고급언어에서 저급언어로 변환하는 방식 2가지가 있다.

- 컴파일 방식: 컴파일 언어로 작성된 소스코드는 코드 전체가 저급언어로 변환되는 과정이다. 이러한 컴파일을 수행해 주는 도구를 컴파일러라고 부른다.
  - C, C#, Java..
- 인터프리터 방식: 소스코드를 한 줄씩 저급언어로 변환하여 실행해주는 도구이다.
  - Python, JavaScript..

컴파일 방식으로 작동하는 언어를 컴파일 언어, 인터프리터 방식으로 작동하는 언어를 인터프리터 언어라고 한다. 인터프리터 방식은 한 줄 한줄씩 해석해야 하기 때문에 컴파일 방식보다 느리다.

> Java 언어의 경우 컴파일 언어이기도 하고, 인터프리터 언어이기도 하다. `.java` 파일을 컴파일러에 의해 컴파일 되어 `.class` 파일로 변환되고, 자바 바이트코드는 인터프리터 방식으로 한줄씩 해석하고 실행한다.

### 연산 코드와 오퍼랜드

명령어는 연산코드와 오퍼랜드로 구성되어 있다.

- 연산코드: 명령어가 수행할 연산 (연산자)
- 오퍼랜드: 연산에 사용할 데이터 또는 연산에 사용할 데이터가 저장된 위치 (피연산자)

#### 주소 지정 방식

주소 지정 방식은 오퍼랜드 필드에 데이터가 저장된 위치를 명시할 때 연산에 사용할 데이터 위치를 찾는 방법을 말한다.

- **즉시 주소 지정 방식**: 연산에 사용할 데이터를 오퍼랜드 필드에 직접 명시하는 방식
  - 데이터 크기가 작아지는 단점이 있지만 연산에 사용할 데이터를 메모리나 레지스터로부터 찾는 과정이 없기 때문에 빠르다.
- **직접 주소 지정 방식**: 오퍼랜드 필드에 유효 주소를 직접적으로 명시하는 방식
  - 데이터의 크기는 커졌지만 유효 주소에 제한이 생길 수 있다.
- **간접 주소 지정 방식**: 유효 주소의 주소를 오퍼랜드 필드에 명시하는 방식
  - 유효 주소의 범위가 넓어졌지만 두 번의 메모리 접근이 필요하여 느리다.
- **레지스터 주소 지정 방식**: 직접 주소 지정 방식과 비슷하게 연산에 사용할 데이터를 저장한 레지스터를 오퍼랜드 필드에 직접 명시하는 방식
  - 레지스터에 접근하여 빠르지만 레지스터 크기에 제한이 생길 수 있다.
- **레지스터 간접 주소 지정 방식**: 연산에 사용할 데이터를 메모리에 저장하고, 그 유효주소를 저장한 레지스터를 오퍼랜드 필드에 명시하는 방식
  - 메모리 접근이 한번으로 줄어들고, 빠르다.
- 상대 주소 지정 방식: 오퍼랜드와 프로그램 카운터의 값을 더하여 유효주소를 얻는 방식
- 베이스 레지스터 주소 지정 방식: 오퍼랜드와 베이스 레지스터의 값을 더하여 유효주솔르 얻는 방식

## CPU의 작동 원리

CPU는 메모리에 저장된 명령어를 읽어 들이고, 해석하고, 실행하는 장치이다. CPU 내부에는 계산을 담당하는 ALU, 명령어를 읽어 들이고 해석하는 제어장치, 작은 임시 저장 장치인 레지스터가 있다.

### ALU

ALU는 레지스터를 통해 피연산자를 받아들이고, 제어장치로부터 수행할 연산을 알려주는 제어신호를 받아들인다. ALU는 레지스터와 제어장치로부터 받아들인 피연산자와 제어신호로 산술 연산, 논리 연산 등 다양한 연산을 수행한다.

### 제어장치

제어장치는 제어신호를 내보내고, 명령어를 해석하는 부품이다. 제어신호는 컴퓨터 부품들을 관리하고 작동시키기 위한 일종의 전기신호이다. 아래는 제어장치의 특징이다.

- 클럭 신호를 받아들인다.
- 해석해야 할 명령어를 받아들인다.
- 플래그 레지스터 속 플래그 값을 받아들인다.
- 시스템 버스중 제어버스로 전달된 제어신호를 받아들인다.

클럭(clock)이란 컴퓨터의 모든 부품을 일사불란하게 움직일 수 있게 하는 시간 단위이다. 클럭의 "똑-딱-똑-딱" 주기에 맞춰 한 레지스터에서 다른 레지스터로 데이터가 이동되거나 ALU에서 연산이 수행되거나 CPU가 메모리에 저장된 명령어를 읽어 들인다.

### 레지스터

CPU 안에는 다양한 레지스터들이 있고, 각 레지스터들은 역할이 있으며 그에 걸맞는 내용을 저장한다.

- **프로그램 카운터**: 메모리에서 가져올 명령어의 주소, 즉 메모리에서 읽어 들일 명령어의 주소를 저장한다.
- **명령어 레지스터**: 해석할 명령어, 즉 방금 메모리에서 읽어들인 명령어를 저장한다.
- **메모리 주소 레지스터**: 메모리의 주소를 저장한다.
- **메모리 버퍼 레지스터**: 메모리와 주고받을 값을 저장하는 레지스터이다.
- **범용 레지스터**: 이름 그대로 다양하고 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터이다.
- **플래스 레지스터**: 연산 결과 또는 CPU 상태에 대한 부가적인 정보를 저장한다.

### 명령어 사이클과 인터럽트

CPU가 하나의 명령어를 처리하는 과정에는 어떤 정해진 흐름이 있고, CPU는 그 흐름을 반복하며 명령어들을 처리해 나간다. 이렇게 하나의 명령어를 처리하는 정형화된 흐름을 **명령어 사이클**이라 한다.

CPU는 정해진 흐름에 따라 명령어를 처리해 나가지만, 간혹 이 흐름이 끊어지는 상황이 발생하는데 이를 **인터럽트**라 한다.

- 명령어 사이클: 프로그램 속 각각의 명령어들은 일정한 주기가 반복되며 실행되는데 이를 명령어 사이클이라 한다..
- 인터럽트: '방해하다' 라는 의미로, CPU의 작업을 방해하는 신호를 인터럽트라 한다.

#### 동기와 비동기 인터럽트

- 동기 인터럽트: CPU가 실행하는 프로그래밍상의 오류와 같은 예외적인 상황에 마주쳤을 때 발생하는 인터럽트 (동기적으로 처리)
- 비동기 인터럽트: 주로 입출력장치에 의해 발생하고, 키보드의 경우 "이런 입력이 들어왔는데 처리해줘!" 식으로 콜백을 날려주고, CPU는 해당 콜백을 받아서 처리해준다. 이를 비동기적으로 처리한다해서 비동기 인터럽트라 하며, 일반적으로 인터럽트가 비동기 인터럽트이다.
